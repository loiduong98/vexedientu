{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\vexedientu\\\\Front-End\\\\dath-react\\\\src\\\\components\\\\ChonGhe.js\";\nimport React, { Component } from \"react\";\nimport ReactNotification from \"react-notifications-component\";\nimport \"react-notifications-component/dist/theme.css\";\nimport { store } from \"react-notifications-component\";\nimport Axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\n\nclass ChonGhe extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seat: [],\n      seatAvailable: [],\n      seatReserved: [],\n      seatBooked: [],\n      isGoThongTinDatVe: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (this.state.seatReserved.length === 0) {\n      store.addNotification({\n        message: \"Vui lòng chọn ghế bạn muốn\",\n        type: \"warning\",\n        insert: \"top\",\n        container: \"top-right\",\n        animationIn: [\"animated\", \"animate__flipInX\"],\n        animationOut: [\"animated\", \"animate__fadeOutDown\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n    } else {\n      this.props.dslichchayData.map(item => {\n        if (item.idTuyen === this.step1.idTuyen) {\n          return this.tongtien = parseInt(item.Gia) * parseInt(this.state.seatReserved.length);\n        }\n      });\n      this.setState({\n        isGoThongTinDatVe: true,\n        tongtien: this.tongtien\n      }, () => {\n        if (typeof Storage !== \"undefined\") {\n          // Khởi tạo sesionStorage\n          sessionStorage.setItem(\"chonghe\", JSON.stringify(this.state));\n        } else {\n          alert(\"Trình duyệt của bạn không hỗ trợ!\");\n        }\n\n        return console.log(this.state);\n      });\n    }\n  } // xử lý sự kiện onclich chọn ghế\n\n\n  onClickData(seat) {\n    if (this.state.seatBooked.indexOf(seat) > -1) {\n      store.addNotification({\n        message: \"Ghế này đã có người đặt trước, vui lòng chọn ghế khác\",\n        type: \"warning\",\n        insert: \"top\",\n        container: \"top-right\",\n        animationIn: [\"animated\", \"animate__flipInX\"],\n        animationOut: [\"animated\", \"animate__fadeOutDown\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n    } else if (this.state.seatReserved.indexOf(seat) > -1) {\n      this.setState({\n        seatAvailable: this.state.seatAvailable.concat(seat),\n        seatReserved: this.state.seatReserved.filter(res => res !== seat)\n      });\n      store.addNotification({\n        message: \"Bạn đã bỏ chọn ghế \" + seat,\n        type: \"info\",\n        insert: \"top\",\n        container: \"top-right\",\n        animationIn: [\"animated\", \"animate__flipInX\"],\n        animationOut: [\"animated\", \"animate__fadeOutDown\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n    } else {\n      this.setState({\n        seatReserved: this.state.seatReserved.concat(seat),\n        seatAvailable: this.state.seatAvailable.filter(res => res !== seat)\n      });\n      store.addNotification({\n        message: \"Bạn vừa chọn ghế \" + seat,\n        type: \"success\",\n        insert: \"top\",\n        container: \"top-right\",\n        animationIn: [\"animated\", \"animate__flipInX\"],\n        animationOut: [\"animated\", \"animate__fadeOutDown\"],\n        dismiss: {\n          duration: 5000,\n          onScreen: true\n        }\n      });\n    }\n  }\n\n  componentWillMount() {\n    if (typeof Storage !== \"undefined\") {\n      // get sessionStorage\n      this.step1 = JSON.parse(sessionStorage.getItem(\"chonTuyen\"));\n    } else {\n      alert(\"Vui lòng quay lại trang chủ\");\n    }\n  } //get data từ API\n\n\n  getDataAPI() {\n    Axios.all([Axios.get(\"http://localhost:8000/api/lichchay\"), Axios.get(\"http://localhost:8000/api/xe\")]).then(resArr => {\n      // đẩy dữ liệu danh sách lịch chạy từ API get được vào reducer\n      this.props.dispatch({\n        type: \"FETCH_DSLICHCHAY\",\n        payload: resArr[0].data\n      }); // đẩy dữ liệu danh sách xe từ API get được vào reducer\n\n      this.props.dispatch({\n        type: \"FETCH_DSXE\",\n        payload: resArr[1].data\n      }); // lấy id xe, lấy id lịch chạy\n\n      this.props.dslichchayData.map(item => {\n        if (item.idTuyen === this.step1.idTuyen) {\n          this.setState({\n            idXe: item.idXe,\n            idLichChay: item.id\n          }, () => {\n            console.log(this.state);\n          });\n        }\n      }); // lấy danh sách ghế từ xe ra\n\n      this.props.dsxeData.map(item => {\n        if (item.id === this.state.idXe) {\n          // đẩy tất cả ghế vào dạng chuỗi\n          var tatcaghe = item.TatCaGhe.split(/[\\s,]+/); // đẩy các ghế đã đặt vào dạng chuỗi\n\n          var ghedadat = item.GheDaDat.split(/[\\s,]+/); // lọc ra ghế còn trống\n\n          const ghetrong = tatcaghe.filter(i => !ghedadat.includes(i)); // đẩy tất cả ghế vào ma trận sợ đồ để in ra\n\n          const toMatrix = (arr, width) => arr.reduce((rows, key, index) => (index % width === 0 ? rows.push([key]) : rows[rows.length - 1].push(key)) && rows, []);\n\n          var matranghe = toMatrix(tatcaghe, 4);\n          this.setState({\n            seatBooked: ghedadat,\n            seatAvailable: ghetrong,\n            seat: matranghe\n          });\n        }\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  componentDidMount() {\n    this.getDataAPI();\n  }\n\n  render() {\n    // định dạng ngày đi ra màn hình\n    var ngaydi = this.step1.ngayDi;\n    var tempdate = \"\";\n    var inngaydi = tempdate.concat(ngaydi.substr(8, 2), \" \", ngaydi.substr(4, 1), \" \", ngaydi.substr(5, 2), \" \", ngaydi.substr(4, 1), \" \", ngaydi.substr(0, 4)); //điều kiện chuyển hướng\n\n    if (this.state.isGoThongTinDatVe === true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/thong-tin-dat-ve\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"section\", {\n      id: \"chonghe\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ReactNotification, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-stepper-horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }, \"directions_bus\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    }, \"Ch\\u1ECDn tuy\\u1EBFn\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }\n    }, \"event_seat\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 15\n      }\n    }, \"Ch\\u1ECDn gh\\u1EBF\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }\n    }, \"edit\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 15\n      }\n    }, \"\\u0110i\\u1EC1n th\\xF4ng tin\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }\n    }, \"credit_card\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 15\n      }\n    }, \"Thanh to\\xE1n\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-step-bar-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header card-header-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 19\n      }\n    }, \"M\\u1EDDi b\\u1EA1n ch\\u1ECDn gh\\u1EBF\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive|table-responsive-sm|table-responsive-md|table-responsive-lg|table-responsive-xl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      id: \"text-confirm\",\n      style: {\n        fontWeight: 300,\n        marginTop: \"24px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 19\n      }\n    }, \"B\\u1EA1n \\u0111\\xE3 ch\\u1ECDn\", /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: \"red\",\n        fontWeight: \"bold\",\n        paddingLeft: \"3px\",\n        paddingRight: \"3px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }\n    }, \"(\", this.state.seatReserved.length, \")\"), \"gh\\u1EBF\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 21\n      }\n    }), this.state.seatReserved.map(item => {\n      return item + \", \";\n    })), /*#__PURE__*/React.createElement(\"h5\", {\n      id: \"tongTien\",\n      style: {\n        fontWeight: 300\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 19\n      }\n    }, \"T\\u1ED5ng s\\u1ED1 ti\\u1EC1n l\\xE0:\", /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: \"red\",\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 21\n      }\n    }, \"(\", this.props.dslichchayData.map((item, index) => {\n      if (item.idTuyen === this.step1.idTuyen) {\n        return (parseInt(item.Gia) * parseInt(this.state.seatReserved.length)).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      }\n    }), \")\"), \"\\u0111\")), /*#__PURE__*/React.createElement(DrawGrid, {\n      seat: this.state.seat,\n      available: this.state.seatAvailable,\n      reserved: this.state.seatReserved,\n      booked: this.state.seatBooked,\n      onClickData: this.onClickData.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header card-header-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 19\n      }\n    }, this.step1.inputTuyen, \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 45\n      }\n    }), inngaydi)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check form-check-radio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"exampleRadios\",\n      id: \"exampleRadios2\",\n      defaultValue: \"option2\",\n      defaultChecked: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 25\n      }\n    }), \"Gi\\xE1 v\\xE9:\", \" \", this.props.dslichchayData.map((item, index) => {\n      if (item.idTuyen === this.step1.idTuyen) {\n        return item.Gia.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      }\n    }), \" \", \"\\u0111 / ng\\u01B0\\u1EDDi\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 27\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"info-title\",\n      style: {\n        marginBottom: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 23\n      }\n    }, \"Bi\\u1EC3n s\\u1ED1 xe\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 23\n      }\n    }, this.props.dsxeData.map(item => {\n      if (item.id === this.state.idXe) {\n        return item.BSXe;\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"info-title\",\n      style: {\n        marginBottom: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 23\n      }\n    }, \"Gi\\u1EDD kh\\u1EDFi h\\xE0nh\"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      id: \"exampleFormControlSelect1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 25\n      }\n    }, \"06:00\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 25\n      }\n    }, \"09:00\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 25\n      }\n    }, \"12:00\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 25\n      }\n    }, \"18:00\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"info-title\",\n      style: {\n        marginBottom: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 23\n      }\n    }, \"\\u0110i\\u1EC3m l\\xEAn xe\"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      id: \"exampleFormControlSelect2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 25\n      }\n    }, \"475A \\u0110i\\u1EC7n Bi\\xEAn Ph\\u1EE7\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 25\n      }\n    }, \"Khu C\\xF4ng Ngh\\u1EC7 Cao\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 25\n      }\n    }, \"Ung V\\u0103n Khi\\xEAm\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"info pt-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"info-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 23\n      }\n    }, \"Mi\\u1EC5n ph\\xED\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icon icon-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icon icon-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 27\n      }\n    }, \"wifi\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 27\n      }\n    }, \"fastfood\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 27\n      }\n    }, \"music_video\")))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-block btn-success\",\n      onClick: e => this.handleSubmit(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 21\n      }\n    }, \"Ti\\u1EBFp t\\u1EE5c \", /*#__PURE__*/React.createElement(\"span\", {\n      class: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 32\n      }\n    }, \"forward\")))))))));\n  }\n\n}\n\nclass DrawGrid extends React.Component {\n  render() {\n    var classOfSeat = col => {\n      if (this.props.reserved.indexOf(col) > -1) {\n        return \"reserved\";\n      } else if (this.props.booked.indexOf(col) > -1) {\n        return \"booked\";\n      } else {\n        return \"available\";\n      }\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-striped|table-dark|table-bordered|table-borderless|table-hover|table-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-dark|thead-light\",\n      style: {\n        padding: \"16px 16px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      style: {\n        color: \"#ff9e00\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 15\n      }\n    }, \"S\\u01A1 \\u0111\\u1ED3 gh\\u1EBF\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: \"#eaeaea\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 19\n      }\n    }, \"airline_seat_recline_extra\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 19\n      }\n    }), \" \\u0111\\xE3 \\u0111\\u1EB7t\")), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: \"#ff9e00\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 19\n      }\n    }, \"airline_seat_recline_extra\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 19\n      }\n    }), \" \\u0111ang ch\\u1ECDn\")), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: \"#202429\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 19\n      }\n    }, \"airline_seat_recline_extra\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 19\n      }\n    }), \" c\\xF2n tr\\u1ED1ng\")))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        width: \"50px\",\n        height: \"50px\"\n      },\n      src: \"assets/img/volang.png\",\n      alt: \"T\\xE0i x\\u1EBF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 17\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 17\n      }\n    }, \"L\\xE1i xe\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        width: \"50px\",\n        height: \"50px\"\n      },\n      src: \"assets/img/cua.png\",\n      alt: \"C\\u1EEDa l\\xEAn xu\\u1ED1ng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 17\n      }\n    }, \"C\\u1EEDa l\\xEAn\"))), this.props.seat.map(row => /*#__PURE__*/React.createElement(\"tr\", {\n      key: row,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 15\n      }\n    }, row.map(col => /*#__PURE__*/React.createElement(\"td\", {\n      className: classOfSeat(col),\n      key: col,\n      onClick: e => this.onClickSeat(col),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 21\n      }\n    }, \"airline_seat_recline_extra\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 21\n      }\n    }), col, \" \")))))));\n  }\n\n  onClickSeat(seat) {\n    this.props.onClickData(seat);\n  }\n\n} // class AvailableList extends React.Component {\n//   render() {\n//     const seatCount = this.props.available.length;\n//     return (\n//       <div className=\"text-center\">\n//         <h4>\n//           Ghế còn trống: ({seatCount === 0 ? \"No seats available\" : seatCount})\n//         </h4>\n//         <span>\n//           {this.props.available.map((res) => (\n//             <p key={res}>{res} - </p>\n//           ))}\n//         </span>\n//       </div>\n//     );\n//   }\n// }\n// class ReservedList extends React.Component {\n//   render() {\n//     return (\n//       <div className=\"right\">\n//         <h4>Ghế đang chọn: ({this.props.reserved.length})</h4>\n//         <ul>\n//           {this.props.reserved.map((res) => (\n//             <li key={res}>{res}</li>\n//           ))}\n//         </ul>\n//       </div>\n//     );\n//   }\n// }\n\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    dslichchayData: state.dslichchayReducer.dslichchayData,\n    dsxeData: state.dsxeReducer.dsxeData\n  };\n};\n\nexport default connect(mapStateToProps)(ChonGhe);","map":{"version":3,"sources":["C:/xampp/htdocs/vexedientu/Front-End/dath-react/src/components/ChonGhe.js"],"names":["React","Component","ReactNotification","store","Axios","connect","Redirect","ChonGhe","constructor","props","state","seat","seatAvailable","seatReserved","seatBooked","isGoThongTinDatVe","handleSubmit","bind","e","preventDefault","length","addNotification","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","dslichchayData","map","item","idTuyen","step1","tongtien","parseInt","Gia","setState","Storage","sessionStorage","setItem","JSON","stringify","alert","console","log","onClickData","indexOf","concat","filter","res","componentWillMount","parse","getItem","getDataAPI","all","get","then","resArr","dispatch","payload","data","idXe","idLichChay","id","dsxeData","tatcaghe","TatCaGhe","split","ghedadat","GheDaDat","ghetrong","i","includes","toMatrix","arr","width","reduce","rows","key","index","push","matranghe","catch","err","componentDidMount","render","ngaydi","ngayDi","tempdate","inngaydi","substr","fontWeight","marginTop","color","paddingLeft","paddingRight","toString","replace","inputTuyen","marginBottom","BSXe","DrawGrid","classOfSeat","col","reserved","booked","padding","height","row","onClickSeat","mapStateToProps","ownProps","dslichchayReducer","dsxeReducer"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport ReactNotification from \"react-notifications-component\";\r\nimport \"react-notifications-component/dist/theme.css\";\r\nimport { store } from \"react-notifications-component\";\r\nimport Axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass ChonGhe extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      seat: [],\r\n      seatAvailable: [],\r\n      seatReserved: [],\r\n      seatBooked: [],\r\n      isGoThongTinDatVe: false,\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (this.state.seatReserved.length === 0) {\r\n      store.addNotification({\r\n        message: \"Vui lòng chọn ghế bạn muốn\",\r\n        type: \"warning\",\r\n        insert: \"top\",\r\n        container: \"top-right\",\r\n        animationIn: [\"animated\", \"animate__flipInX\"],\r\n        animationOut: [\"animated\", \"animate__fadeOutDown\"],\r\n        dismiss: {\r\n          duration: 5000,\r\n          onScreen: true,\r\n        },\r\n      });\r\n    } else {\r\n      this.props.dslichchayData.map((item) => {\r\n        if (item.idTuyen === this.step1.idTuyen) {\r\n          return (this.tongtien =\r\n            parseInt(item.Gia) * parseInt(this.state.seatReserved.length));\r\n        }\r\n      });\r\n      this.setState(\r\n        { isGoThongTinDatVe: true, tongtien: this.tongtien },\r\n        () => {\r\n          if (typeof Storage !== \"undefined\") {\r\n            // Khởi tạo sesionStorage\r\n            sessionStorage.setItem(\"chonghe\", JSON.stringify(this.state));\r\n          } else {\r\n            alert(\"Trình duyệt của bạn không hỗ trợ!\");\r\n          }\r\n          return console.log(this.state);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // xử lý sự kiện onclich chọn ghế\r\n  onClickData(seat) {\r\n    if (this.state.seatBooked.indexOf(seat) > -1) {\r\n      store.addNotification({\r\n        message: \"Ghế này đã có người đặt trước, vui lòng chọn ghế khác\",\r\n        type: \"warning\",\r\n        insert: \"top\",\r\n        container: \"top-right\",\r\n        animationIn: [\"animated\", \"animate__flipInX\"],\r\n        animationOut: [\"animated\", \"animate__fadeOutDown\"],\r\n        dismiss: {\r\n          duration: 5000,\r\n          onScreen: true,\r\n        },\r\n      });\r\n    } else if (this.state.seatReserved.indexOf(seat) > -1) {\r\n      this.setState({\r\n        seatAvailable: this.state.seatAvailable.concat(seat),\r\n        seatReserved: this.state.seatReserved.filter((res) => res !== seat),\r\n      });\r\n      store.addNotification({\r\n        message: \"Bạn đã bỏ chọn ghế \" + seat,\r\n        type: \"info\",\r\n        insert: \"top\",\r\n        container: \"top-right\",\r\n        animationIn: [\"animated\", \"animate__flipInX\"],\r\n        animationOut: [\"animated\", \"animate__fadeOutDown\"],\r\n        dismiss: {\r\n          duration: 5000,\r\n          onScreen: true,\r\n        },\r\n      });\r\n    } else {\r\n      this.setState({\r\n        seatReserved: this.state.seatReserved.concat(seat),\r\n        seatAvailable: this.state.seatAvailable.filter((res) => res !== seat),\r\n      });\r\n      store.addNotification({\r\n        message: \"Bạn vừa chọn ghế \" + seat,\r\n        type: \"success\",\r\n        insert: \"top\",\r\n        container: \"top-right\",\r\n        animationIn: [\"animated\", \"animate__flipInX\"],\r\n        animationOut: [\"animated\", \"animate__fadeOutDown\"],\r\n        dismiss: {\r\n          duration: 5000,\r\n          onScreen: true,\r\n        },\r\n      });\r\n    }\r\n  }\r\n  step1; // biến chứa dữ liệu từ session storage\r\n\r\n  tongtien;\r\n\r\n  componentWillMount() {\r\n    if (typeof Storage !== \"undefined\") {\r\n      // get sessionStorage\r\n      this.step1 = JSON.parse(sessionStorage.getItem(\"chonTuyen\"));\r\n    } else {\r\n      alert(\"Vui lòng quay lại trang chủ\");\r\n    }\r\n  }\r\n\r\n  //get data từ API\r\n  getDataAPI() {\r\n    Axios.all([\r\n      Axios.get(\"http://localhost:8000/api/lichchay\"),\r\n      Axios.get(\"http://localhost:8000/api/xe\"),\r\n    ])\r\n      .then((resArr) => {\r\n        // đẩy dữ liệu danh sách lịch chạy từ API get được vào reducer\r\n        this.props.dispatch({\r\n          type: \"FETCH_DSLICHCHAY\",\r\n          payload: resArr[0].data,\r\n        });\r\n        // đẩy dữ liệu danh sách xe từ API get được vào reducer\r\n        this.props.dispatch({\r\n          type: \"FETCH_DSXE\",\r\n          payload: resArr[1].data,\r\n        });\r\n\r\n        // lấy id xe, lấy id lịch chạy\r\n        this.props.dslichchayData.map((item) => {\r\n          if (item.idTuyen === this.step1.idTuyen) {\r\n            this.setState({ idXe: item.idXe, idLichChay: item.id }, () => {\r\n              console.log(this.state);\r\n            });\r\n          }\r\n        });\r\n\r\n        // lấy danh sách ghế từ xe ra\r\n        this.props.dsxeData.map((item) => {\r\n          if (item.id === this.state.idXe) {\r\n            // đẩy tất cả ghế vào dạng chuỗi\r\n            var tatcaghe = item.TatCaGhe.split(/[\\s,]+/);\r\n            // đẩy các ghế đã đặt vào dạng chuỗi\r\n            var ghedadat = item.GheDaDat.split(/[\\s,]+/);\r\n            // lọc ra ghế còn trống\r\n            const ghetrong = tatcaghe.filter((i) => !ghedadat.includes(i));\r\n\r\n            // đẩy tất cả ghế vào ma trận sợ đồ để in ra\r\n            const toMatrix = (arr, width) =>\r\n              arr.reduce(\r\n                (rows, key, index) =>\r\n                  (index % width === 0\r\n                    ? rows.push([key])\r\n                    : rows[rows.length - 1].push(key)) && rows,\r\n                []\r\n              );\r\n            var matranghe = toMatrix(tatcaghe, 4);\r\n\r\n            this.setState({\r\n              seatBooked: ghedadat,\r\n              seatAvailable: ghetrong,\r\n              seat: matranghe,\r\n            });\r\n          }\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getDataAPI();\r\n  }\r\n\r\n  render() {\r\n    // định dạng ngày đi ra màn hình\r\n    var ngaydi = this.step1.ngayDi;\r\n    var tempdate = \"\";\r\n    var inngaydi = tempdate.concat(\r\n      ngaydi.substr(8, 2),\r\n      \" \",\r\n      ngaydi.substr(4, 1),\r\n      \" \",\r\n      ngaydi.substr(5, 2),\r\n      \" \",\r\n      ngaydi.substr(4, 1),\r\n      \" \",\r\n      ngaydi.substr(0, 4)\r\n    );\r\n\r\n    //điều kiện chuyển hướng\r\n    if (this.state.isGoThongTinDatVe === true) {\r\n      return <Redirect to=\"/thong-tin-dat-ve\" />;\r\n    }\r\n    return (\r\n      <section id=\"chonghe\">\r\n        <ReactNotification />\r\n        <div className=\"container\">\r\n          <div className=\"md-stepper-horizontal\">\r\n            <div className=\"md-step active\">\r\n              <div className=\"md-step-circle\">\r\n                <span className=\"material-icons\">directions_bus</span>\r\n              </div>\r\n              <div className=\"md-step-title\">Chọn tuyến</div>\r\n              <div className=\"md-step-bar-left\" />\r\n              <div className=\"md-step-bar-right\" />\r\n            </div>\r\n            <div className=\"md-step active\">\r\n              <div className=\"md-step-circle\">\r\n                <span className=\"material-icons\">event_seat</span>\r\n              </div>\r\n              <div className=\"md-step-title\">Chọn ghế</div>\r\n              <div className=\"md-step-bar-left\" />\r\n              <div className=\"md-step-bar-right\" />\r\n            </div>\r\n            <div className=\"md-step\">\r\n              <div className=\"md-step-circle\">\r\n                <span className=\"material-icons\">edit</span>\r\n              </div>\r\n              <div className=\"md-step-title\">Điền thông tin</div>\r\n              <div className=\"md-step-bar-left\" />\r\n              <div className=\"md-step-bar-right\" />\r\n            </div>\r\n            <div className=\"md-step\">\r\n              <div className=\"md-step-circle\">\r\n                <span className=\"material-icons\">credit_card</span>\r\n              </div>\r\n              <div className=\"md-step-title\">Thanh toán</div>\r\n              <div className=\"md-step-bar-left\" />\r\n              <div className=\"md-step-bar-right\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-8\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header card-header-primary\">\r\n                  <h4 className=\"card-title\">Mời bạn chọn ghế</h4>\r\n                </div>\r\n                <div className=\"table-responsive|table-responsive-sm|table-responsive-md|table-responsive-lg|table-responsive-xl\">\r\n                  <h5\r\n                    id=\"text-confirm\"\r\n                    style={{ fontWeight: 300, marginTop: \"24px\" }}\r\n                  >\r\n                    Bạn đã chọn\r\n                    <span\r\n                      style={{\r\n                        color: \"red\",\r\n                        fontWeight: \"bold\",\r\n                        paddingLeft: \"3px\",\r\n                        paddingRight: \"3px\",\r\n                      }}\r\n                    >\r\n                      ({this.state.seatReserved.length})\r\n                    </span>\r\n                    ghế\r\n                    <br />\r\n                    {this.state.seatReserved.map((item) => {\r\n                      return item + \", \";\r\n                    })}\r\n                  </h5>\r\n                  <h5 id=\"tongTien\" style={{ fontWeight: 300 }}>\r\n                    Tổng số tiền là:\r\n                    <span style={{ color: \"red\", fontWeight: \"bold\" }}>\r\n                      (\r\n                      {this.props.dslichchayData.map((item, index) => {\r\n                        if (item.idTuyen === this.step1.idTuyen) {\r\n                          return (\r\n                            parseInt(item.Gia) *\r\n                            parseInt(this.state.seatReserved.length)\r\n                          )\r\n                            .toString()\r\n                            .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n                        }\r\n                      })}\r\n                      )\r\n                    </span>\r\n                    đ\r\n                  </h5>\r\n                </div>\r\n                <DrawGrid\r\n                  seat={this.state.seat}\r\n                  available={this.state.seatAvailable}\r\n                  reserved={this.state.seatReserved}\r\n                  booked={this.state.seatBooked}\r\n                  onClickData={this.onClickData.bind(this)}\r\n                />\r\n              </div>\r\n            </div>\r\n            {/* end col 8 */}\r\n            <div className=\"col-md-4\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header card-header-primary\">\r\n                  <h4 className=\"card-title\">\r\n                    {this.step1.inputTuyen} <br />\r\n                    {inngaydi}\r\n                  </h4>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <form>\r\n                    <div className=\"form-check form-check-radio\">\r\n                      <label className=\"form-check-label\">\r\n                        <input\r\n                          className=\"form-check-input\"\r\n                          type=\"radio\"\r\n                          name=\"exampleRadios\"\r\n                          id=\"exampleRadios2\"\r\n                          defaultValue=\"option2\"\r\n                          defaultChecked\r\n                        />\r\n                        Giá vé:{\" \"}\r\n                        {this.props.dslichchayData.map((item, index) => {\r\n                          if (item.idTuyen === this.step1.idTuyen) {\r\n                            return item.Gia.toString().replace(\r\n                              /\\B(?=(\\d{3})+(?!\\d))/g,\r\n                              \",\"\r\n                            );\r\n                          }\r\n                        })}{\" \"}\r\n                        đ / người\r\n                        <span className=\"circle\">\r\n                          <span className=\"check\" />\r\n                        </span>\r\n                      </label>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <h4\r\n                        className=\"info-title\"\r\n                        style={{ marginBottom: \"0px\" }}\r\n                      >\r\n                        Biển số xe\r\n                      </h4>\r\n                      <p>\r\n                        {this.props.dsxeData.map((item) => {\r\n                          if (item.id === this.state.idXe) {\r\n                            return item.BSXe;\r\n                          }\r\n                        })}\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      <h4\r\n                        className=\"info-title\"\r\n                        style={{ marginBottom: \"0px\" }}\r\n                      >\r\n                        Giờ khởi hành\r\n                      </h4>\r\n                      <select\r\n                        className=\"form-control\"\r\n                        id=\"exampleFormControlSelect1\"\r\n                      >\r\n                        <option>06:00</option>\r\n                        <option>09:00</option>\r\n                        <option>12:00</option>\r\n                        <option>18:00</option>\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <h4\r\n                        className=\"info-title\"\r\n                        style={{ marginBottom: \"0px\" }}\r\n                      >\r\n                        Điểm lên xe\r\n                      </h4>\r\n                      <select\r\n                        className=\"form-control\"\r\n                        id=\"exampleFormControlSelect2\"\r\n                      >\r\n                        <option>475A Điện Biên Phủ</option>\r\n                        <option>Khu Công Nghệ Cao</option>\r\n                        <option>Ung Văn Khiêm</option>\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"info pt-1\">\r\n                      <h4 className=\"info-title\">Miễn phí</h4>\r\n                      <div className=\"icon icon-info\">\r\n                        <div className=\"icon icon-primary\">\r\n                          <i className=\"material-icons\">wifi</i>\r\n                          <i className=\"material-icons\">fastfood</i>\r\n                          <i className=\"material-icons\">music_video</i>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-block btn-success\"\r\n                      onClick={(e) => this.handleSubmit(e)}\r\n                    >\r\n                      Tiếp tục <span class=\"material-icons\">forward</span>\r\n                    </button>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* end col 4 */}\r\n          </div>\r\n          {/* end row */}\r\n        </div>\r\n        {/* end container */}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nclass DrawGrid extends React.Component {\r\n  render() {\r\n    var classOfSeat = (col) => {\r\n      if (this.props.reserved.indexOf(col) > -1) {\r\n        return \"reserved\";\r\n      } else if (this.props.booked.indexOf(col) > -1) {\r\n        return \"booked\";\r\n      } else {\r\n        return \"available\";\r\n      }\r\n    };\r\n    return (\r\n      <div className=\"container\">\r\n        <table className=\"table table-striped|table-dark|table-bordered|table-borderless|table-hover|table-sm\">\r\n          <thead\r\n            className=\"thead-dark|thead-light\"\r\n            style={{ padding: \"16px 16px\" }}\r\n          >\r\n            <tr>\r\n              <th scope=\"col\" style={{ color: \"#ff9e00\" }}>\r\n                Sơ đồ ghế\r\n              </th>\r\n              <th scope=\"col\">\r\n                <div style={{ color: \"#eaeaea\" }}>\r\n                  <span className=\"material-icons\">\r\n                    airline_seat_recline_extra\r\n                  </span>\r\n                  <br /> đã đặt\r\n                </div>\r\n              </th>\r\n              <th scope=\"col\">\r\n                <div style={{ color: \"#ff9e00\" }}>\r\n                  <span className=\"material-icons\">\r\n                    airline_seat_recline_extra\r\n                  </span>\r\n                  <br /> đang chọn\r\n                </div>\r\n              </th>\r\n              <th scope=\"col\">\r\n                <div style={{ color: \"#202429\" }}>\r\n                  <span className=\"material-icons\">\r\n                    airline_seat_recline_extra\r\n                  </span>\r\n                  <br /> còn trống\r\n                </div>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          {/* end table header */}\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <img\r\n                  style={{ width: \"50px\", height: \"50px\" }}\r\n                  src=\"assets/img/volang.png\"\r\n                  alt=\"Tài xế\"\r\n                />{\" \"}\r\n                <h4 className=\"card-title\">Lái xe</h4>\r\n              </td>\r\n              <td></td>\r\n              <td></td>\r\n              <td>\r\n                <img\r\n                  style={{ width: \"50px\", height: \"50px\" }}\r\n                  src=\"assets/img/cua.png\"\r\n                  alt=\"Cửa lên xuống\"\r\n                />\r\n                <h4 className=\"card-title\">Cửa lên</h4>\r\n              </td>\r\n            </tr>\r\n            {this.props.seat.map((row) => (\r\n              <tr key={row}>\r\n                {row.map((col) => (\r\n                  <td\r\n                    className={classOfSeat(col)}\r\n                    key={col}\r\n                    onClick={(e) => this.onClickSeat(col)}\r\n                  >\r\n                    <span className=\"material-icons\">\r\n                      airline_seat_recline_extra\r\n                    </span>\r\n                    <br />\r\n                    {col}{\" \"}\r\n                  </td>\r\n                ))}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* <AvailableList available={this.props.available} /> */}\r\n        {/* <ReservedList reserved={this.props.reserved} /> */}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onClickSeat(seat) {\r\n    this.props.onClickData(seat);\r\n  }\r\n}\r\n\r\n// class AvailableList extends React.Component {\r\n//   render() {\r\n//     const seatCount = this.props.available.length;\r\n//     return (\r\n//       <div className=\"text-center\">\r\n//         <h4>\r\n//           Ghế còn trống: ({seatCount === 0 ? \"No seats available\" : seatCount})\r\n//         </h4>\r\n//         <span>\r\n//           {this.props.available.map((res) => (\r\n//             <p key={res}>{res} - </p>\r\n//           ))}\r\n//         </span>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// class ReservedList extends React.Component {\r\n//   render() {\r\n//     return (\r\n//       <div className=\"right\">\r\n//         <h4>Ghế đang chọn: ({this.props.reserved.length})</h4>\r\n//         <ul>\r\n//           {this.props.reserved.map((res) => (\r\n//             <li key={res}>{res}</li>\r\n//           ))}\r\n//         </ul>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    dslichchayData: state.dslichchayReducer.dslichchayData,\r\n    dsxeData: state.dsxeReducer.dsxeData,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ChonGhe);\r\n"]},"metadata":{},"sourceType":"module"}